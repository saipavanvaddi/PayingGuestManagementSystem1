{% load i18n static admin_soft %}

<style>
    .nav-link i {
        color: white !important;
    }
    
    /* Highlight Active Link */
    .nav-item .active {
        background-color: #007bff !important; /* Change to your preferred color */
        color: white !important;
        border-radius: 10px;
    }
</style>

<aside class="sidenav navbar navbar-vertical navbar-expand-xs border-0 border-radius-xl my-3 fixed-start ms-3 bg-white" id="sidenav-main">
    <div class="sidenav-header">
        <i class="fas fa-times p-3 cursor-pointer text-secondary opacity-5 position-absolute end-0 top-0 d-none d-xl-none" aria-hidden="true" id="iconSidenav"></i>
        <a class="navbar-brand m-0" href="{% url 'pg_tenant_dashboard' %}">
            <img src="{% static 'assets/img/lotez.png' %}" class="navbar-brand-img h-100" alt="main_logo">
            <span class="ms-1 font-weight-bold">Tenant Dashboard</span>
        </a>
    </div>
    <hr class="horizontal dark mt-0">
    <div class="collapse navbar-collapse w-auto" id="sidenav-collapse-main">
        <ul class="navbar-nav">
            <!-- Dashboard -->
            <li class="nav-item">
                <a class="nav-link" href="{% url 'pg_tenant_dashboard' %}">
                    <div class="icon icon-sm shadow border-radius-md bg-white text-center me-2 d-flex align-items-center justify-content-center">
                        <i class="fas fa-home"></i>
                    </div>
                    <span class="nav-link-text ms-1">Dashboard</span>
                </a>
            </li>

            <!-- Profile -->
            <li class="nav-item">
                <a class="nav-link" href="{% url 'pg_tenant_profile' %}">
                    <div class="icon icon-sm shadow border-radius-md bg-white text-center me-2 d-flex align-items-center justify-content-center">
                        <i class="fas fa-user"></i>
                    </div>
                    <span class="nav-link-text ms-1">Profile</span>
                </a>
            </li>

            <!-- Payments -->
            <li class="nav-item">
                <a class="nav-link" href="{% url 'pg_tenant_payments' %}">
                    <div class="icon icon-sm shadow border-radius-md bg-white text-center me-2 d-flex align-items-center justify-content-center">
                        <i class="fas fa-wallet"></i>
                    </div>
                    <span class="nav-link-text ms-1">Payments</span>
                </a>
            </li>

            <!-- Complaints -->
            <li class="nav-item">
                <a class="nav-link" href="{% url 'pg_tenant_complaints' %}">
                    <div class="icon icon-sm shadow border-radius-md bg-white text-center me-2 d-flex align-items-center justify-content-center">
                        <i class="fas fa-exclamation-circle"></i>
                    </div>
                    <span class="nav-link-text ms-1">Complaints</span>
                </a>
            </li>

            <!-- Logout -->
            <li class="nav-item">
                <a class="nav-link text-danger" href="{% url 'pg_tenant_logout' %}">
                    <div class="icon icon-sm shadow border-radius-md bg-white text-center me-2 d-flex align-items-center justify-content-center">
                        <i class="fas fa-sign-out-alt"></i>
                    </div>
                    <span class="nav-link-text ms-1">Logout</span>
                </a>
            </li>
        </ul>
    </div>
</aside>

<!-- JavaScript to Highlight Active Menu -->
<!-- <script>
    document.addEventListener("DOMContentLoaded", function () {
        let links = document.querySelectorAll(".nav-link"); // Get all links
        let allowedLinks = Array.from(links).map(link => link.getAttribute("href")); // Store all valid links
        let currentActive = localStorage.getItem("activeTab"); // Get last active tab from storage

        function setActive(link) {
            links.forEach(l => l.classList.remove("active")); // Remove active class from all
            link.classList.add("active"); // Add active class to the selected link
            localStorage.setItem("activeTab", link.getAttribute("href")); // Store active tab in localStorage
        }

        function getLinkByHref(href) {
            return Array.from(links).find(link => link.getAttribute("href") === href);
        }

        // Restore the last active link, or set Dashboard as default
        let storedLink = getLinkByHref(currentActive);
        if (storedLink && allowedLinks.includes(currentActive)) {
            setActive(storedLink);
        } else {
            let defaultLink = getLinkByHref("{% url 'pg_tenant_dashboard' %}");
            if (defaultLink) setActive(defaultLink);
        }

        // Add click event listeners to all links
        links.forEach(link => {
            link.addEventListener("click", function (event) {
                let clickedHref = link.getAttribute("href");

                // Only update active if the clicked link is in the allowed list
                if (allowedLinks.includes(clickedHref)) {
                    setActive(link);
                } else {
                    event.preventDefault(); // Prevent navigation if invalid
                }
            });
        });
    });
</script> -->


<!-- JavaScript to Highlight Active Menu -->
<script>
    document.addEventListener("DOMContentLoaded", function() {
        let links = document.querySelectorAll(".nav-link");
        let currentUrl = window.location.href;

        links.forEach(link => {
            if (link.href === currentUrl) {
                link.classList.add("active");
            }
        });
    });
</script>





